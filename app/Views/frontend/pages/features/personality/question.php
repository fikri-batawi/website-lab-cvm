<?php
  $questions = [
    [
      "id"            => 1,
      "question"      => "Saya adalah orang yang",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 1,
          "answer"      => "Mudah berfikir positif",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 2,
          "answer"      => "Menyukai tantangan",
          "personality" => "koleris",
        ],
        [
          "id"          => 3,
          "answer"      => "Mudah Berpikir negatif",
          "personality" => "melankolis",
        ],
        [
          "id"          => 4,
          "answer"      => "Lemah lembut",
          "personality" => "plegmatis",
        ],
      ]
    ],
    [
      "id"            => 2,
      "question"      => "Pribadi saya kearah...",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 5,
          "answer"      => "Banyak mendengar daripada berbicara",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 6,
          "answer"      => "Meyakinkan orang lain dengan logika dan fakta",
          "personality" => "koleris",
        ],
        [
          "id"          => 7,
          "answer"      => "Mudah tersinggung dan sensitif",
          "personality" => "melankolis",
        ],
        [
          "id"          => 8,
          "answer"      => "Menghindari segala bentuk kekacauan",
          "personality" => "plegmatis",
        ],
      ]
    ],
    [
      "id"            => 3,
      "question"      => "Dalam Menjalani kehidupan dan keseharian saya...",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 9,
          "answer"      => "mudah bergaul",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 10,
          "answer"      => "Berkemauan tegas dan kuat",
          "personality" => "koleris",
        ],
        [
          "id"          => 11,
          "answer"      => "Penuh pikiran dan suka analisa",
          "personality" => "melankolis",
        ],
        [
          "id"          => 12,
          "answer"      => "Rendah hati",
          "personality" => "plegmatis",
        ],
      ]
    ],
    [
      "id"            => 4,
      "question"      => "Yang orang lain tidak ketahui tentang saya...",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 13,
          "answer"      =>  "Penuh semangat",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 14,
          "answer"      => "Sangat memerlukan perubahan",
          "personality" => "koleris",
        ],
        [
          "id"          => 15,
          "answer"      => "Selalu membuat rencana dan terjadwal",
          "personality" => "melankolis",
        ],
        [
          "id"          => 16,
          "answer"      => "Penurut dan toleran",
          "personality" => "plegmatis",
        ]
      ]
    ],
    [
      "id"            => 5,
      "question"      => "Saya adalah orang yang...",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 17,
          "answer"      => "Penuh rasa ingin tahu",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 18,
          "answer"      => "Memiliki jiwa pemimpin",
          "personality" => "koleris",
        ],
        [
          "id"          => 19,
          "answer"      => "Perfeksionis dan idealis",
          "personality" => "melankolis",
        ],
        [
          "id"          => 20,
          "answer"      => "Pemalu dan pendiam",
          "personality" => "plegmatis",
        ]
      ]
    ],
    [
      "id"            => 6,
      "question"      => "Dalam segala situasi saya selalu",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 21,
          "answer"      => "Selalu terlihat ceria",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 22,
          "answer"      => "Melakukan sesuatu berdasarkan tujuan",
          "personality" => "koleris",
        ],
        [
          "id"          => 23,
          "answer"      => "Detail terhadap hal kecil dan besar",
          "personality" => "melankolis",
        ],
        [
          "id"          => 24,
          "answer"      => "Penakut",
          "personality" => "plegmatis",
        ],
      ]
    ],
    [
      "id"            => 7,
      "question"      => "Hubungan saya dengan orang lain",
      "type_question" => "check",
      "answers"       => [
        [
          "id"          => 25,
          "answer"      => "Senang melihat orang lain terhibur",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 26,
          "answer"      => "Tidak bergantung orang lain",
          "personality" => "koleris",
        ],
        [
          "id"          => 27,
          "answer"      => "Suka memberikan kritikan",
          "personality" => "melankolis",
        ],
        [
          "id"          => 28,
          "answer"      => "Sabar dan ramah",
          "personality" => "plegmatis",
        ],
      ]
    ],        
    [
      "id"            => 8,
      "question"      => "Saya lebih...",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 29,
          "answer"      => "Cenderung pelupa",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 30,
          "answer"      => "Cenderung keras kepala",
          "personality" => "koleris",
        ],
      ]
    ],
    [
      "id"            => 9,
      "question"      => "Satu hal tentang saya...",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 31,
          "answer"      => "Sering kurang tertata",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 32,
          "answer"      => "Mudah curiga",
          "personality" => "melankolis",
        ],
      ]  
    ],               
    [
      "id"            => 10,
      "question"      => "Dalam menanggapi sesuatu, saya sangat...",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 33,
          "answer"      => "Kompetitif",
          "personality" => "sanguinis",
        ],
        [
          "id"          => 34,
          "answer"      => "pasif",
          "personality" => "plegmatis",
        ],
      ]
    ],   
    [
      "id"            => 11,
      "question"      => "Dalam melakukan sesuatu hal, saya penuh...",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 35,
          "answer"      => "Kreatifits yang tinggi",
          "personality" => "koleris",
        ],
        [
          "id"          => 34,
          "answer"      => "Ketelitian",
          "personality" => "melankolis",
        ],
      ]
    ],
    [
      "id"            => 12,
      "question"      => "Mana yang lebih sesuai dengan diri kamu?",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 35,
          "answer"      => "Konsisten dengan tujuan",
          "personality" => "koleris",
        ],
        [
          "id"          => 36,
          "answer"      => "Cenderung tidak berambisi",
          "personality" => "plegmatis",
        ],
      ]
    ],                           
    [
      "id"            => 13,
      "question"      => "Dalam mengambil keputusan saya...",
      "type_question" => "radio",
      "answers"       => [
        [
          "id"          => 37,
          "answer"      => "Sangat logis dan analitis dalam berfikir",
          "personality" => "melankolis",
        ],
        [
          "id"          => 38,
          "answer"      => "Mudah setuju dengan keputusan atau pendapat orang lain",
          "personality" => "plegmatis",
        ],
      ]
    ],                      
  ];
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <?= $this->include('frontend/includes/head') ?>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  </head>

<body>
  <!-- Header -->
  <?= $this->include('frontend/includes/header') ?>

  <!-- Section -->
  <section class="section why-us" data-section="section2">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="section-heading">
            <h2>Personality Test</h2>
            <h4 class="text-light">Pilih pada bagian yang menurut kamu sesuai dengan dirimu.</h4>
            <h4 class="text-light">Selamat Mengerjakan!</h4>
          </div>
        </div>
        <div class="col-md-12">
          <form action="/personality/result" method="POST">
            <!-- Loop Question -->
            <?php foreach($questions as $question) : ?>
              <div class="mb-3">
                <label class="form-label text-light"><?= $question['id'] . ". " . $question['question'] ?></label>
                <!-- Loop answer -->
                <?php if($question['type_question'] == 'check') : ?>
                  <?php foreach($question['answers'] as $answer) : ?>
                    <fieldset>
                      <div class="form-check">
                        <label class="form-check-label text-light" for="<?= $answer['id'] ?>">
                          <input class="form-check-input" type="checkbox" name="answer_questions[<?= $question['id'] ?>][]" value="<?= $answer['personality'] ?>" id="<?= $answer['id'] ?>">
                          <?= $answer['answer'] ?>
                        </label>
                      </div>
                    </fieldset>
                  <?php endforeach; ?>
                <?php elseif($question['type_question'] == 'radio') : ?>
                  <?php foreach($question['answers'] as $answer) : ?>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="answer_questions[<?= $question['id'] ?>][]" id="<?= $answer['id'] ?>" value="<?= $answer['personality'] ?>" >
                      <label class="form-check-label text-light" for="<?= $answer['id'] ?>">
                        <?= $answer['answer'] ?>
                      </label>
                    </div>
                  <?php endforeach; ?>
                <?php endif; ?>
              </div>
            <?php endforeach ?>
            <div class="main-button"><button type="submit">Mulai</button></div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <!-- End Section -->

  <!-- Footer -->
  <?= $this->include('frontend/includes/footer') ?>

  <!-- Scripts -->
  <?= $this->include('frontend/includes/js') ?>

  <script>
    jQuery(function($) {
      var requiredCheckboxes = $(':checkbox[required]');
      requiredCheckboxes.on('change', function(e) {
        var checkboxGroup = requiredCheckboxes.filter('[name="' + $(this).attr('name') + '"]');
        var isChecked = checkboxGroup.is(':checked');
        checkboxGroup.prop('required', !isChecked);
      });
      requiredCheckboxes.trigger('change');
    });
  </script>
</body>
</html>